{% url 'main:product_list' as product_list_url %}

<nav class="w-full border-b bg-[#79B84C] text-white">
  <div class="mx-auto max-w-6xl px-4">
    <!-- Top bar -->
    <div class="flex h-14 items-center gap-4">
      <a href="{{ product_list_url }}" class="flex items-baseline gap-1">
        <span class="text-2xl font-semibold text-black">Panda</span>
        <span class="text-2xl font-semibold text-white">Shop</span>
      </a>

      <!-- Center menu (desktop) -->
      <ul class="hidden md:flex flex-1 justify-center items-center gap-6 text-sm">
        <li><a class="hover:opacity-90" href="{{ product_list_url }}">Home</a></li>
        <li><a class="hover:opacity-90" href="{{ product_list_url }}?category=Equipment,Equipments">Equipments</a></li>
        <li><a class="hover:opacity-90" href="{{ product_list_url }}?category=Shirts,Jersey">Shirts</a></li>
        <li><a class="hover:opacity-90" href="{{ product_list_url }}?category=Hat">Hat</a></li>
        <li><a class="hover:opacity-90" href="{{ product_list_url }}?category=Shoes">Shoes</a></li>
      </ul>

      <!-- Hamburger (mobile) -->
      <button id="nav-btn" class="md:hidden ml-auto inline-flex items-center p-2 rounded hover:bg-white/10" aria-label="Open menu">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>

    <!-- Bottom bar (desktop) -->
    <div class="hidden md:flex py-2 items-start justify-between">
      <div class="flex gap-2">
        <a href="{{ product_list_url }}" class="px-3 py-1.5 rounded-md bg-black text-white hover:bg-black/90 text-sm">
          Produk Saya
        </a>

        {% if request.path == product_list_url %}
          <!-- Tombol create di navbar: buka modal AJAX -->
          <button id="btn-create-nav" type="button"
                  class="px-3 py-1.5 rounded-md bg-black text-white hover:bg-black/90 text-sm">
            Tambah Produk
          </button>
        {% endif %}
      </div>

      {% if request.user.is_authenticated %}
        <div class="flex flex-col items-end gap-1">
          <div class="flex items-center gap-2">
            <span class="text-black/80 bg-white/70 rounded px-2 py-0.5 text-sm">{{ request.user.username }}</span>
            <a href="{% url 'main:logout' %}" id="logout-btn" class="px-3 py-1.5 rounded-md bg-black text-white hover:bg-black/90 text-sm">Logout</a>
          </div>
          {% if request.COOKIES.last_login %}
            <div class="text-xs text-white/90">Last login: {{ request.COOKIES.last_login }}</div>
          {% endif %}
        </div>
      {% else %}
        <div class="flex items-center gap-2">
          <a href="{% url 'main:login' %}" class="px-3 py-1.5 rounded-md bg-black text-white hover:bg-black/90 text-sm">Login</a>
          <a href="{% url 'main:register' %}" class="px-3 py-1.5 rounded-md bg-white text-[#79B84C] text-sm">Register</a>
        </div>
      {% endif %}
    </div>

    <!-- Mobile menu -->
    <div id="nav-mobile" class="hidden md:hidden pb-3">
      <ul class="flex flex-col py-2 gap-2 text-lg">
        <li><a class="block px-2 py-1" href="{{ product_list_url }}">Home</a></li>
        <li><a class="block px-2 py-1" href="{{ product_list_url }}?category=Equipment,Equipments">Equipments</a></li>
        <li><a class="block px-2 py-1" href="{{ product_list_url }}?category=Shirts,Jersey">Shirts</a></li>
        <li><a class="block px-2 py-1" href="{{ product_list_url }}?category=Hat">Hat</a></li>
        <li><a class="block px-2 py-1" href="{{ product_list_url }}?category=Shoes">Shoes</a></li>

        <hr class="border-white/30 my-2">

        {% if request.user.is_authenticated %}
          <li class="px-2 py-1 text-sm bg-white/20 rounded w-max">{{ request.user.username }}</li>
          {% if request.COOKIES.last_login %}
            <li class="px-2 py-1 text-sm">Last login: {{ request.COOKIES.last_login }}</li>
          {% endif %}

          <li><a class="block px-3 py-2 rounded-md bg-black text-white w-max" href="{% url 'main:logout' %}">Logout</a></li>

          <hr class="border-white/30 my-2">

          <li><a class="block px-3 py-2 rounded-md bg-black text-white w-max" href="{{ product_list_url }}">Produk Saya</a></li>

          {% if request.path == product_list_url %}
            <li>
              <button id="btn-create-mobile" type="button"
                      class="block px-3 py-2 rounded-md bg-black text-white w-max">
                Tambah Produk
              </button>
            </li>
          {% endif %}
        {% else %}
          <li><a class="block px-2 py-1" href="{% url 'main:login' %}">Login</a></li>
          <li><a class="block px-2 py-1 bg-white text-[#79B84C] rounded w-max" href="{% url 'main:register' %}">Register</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<script>
  document.getElementById('nav-btn')?.addEventListener('click', function () {
    document.getElementById('nav-mobile')?.classList.toggle('hidden');
  });
</script>
